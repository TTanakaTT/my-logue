# my-logue

シンプルな選択式ローグライト。
Vite + Svelte + TypeScript。

## 概要

### 基本構造

- 全10階層 / 各階層5ステップ構成
- ノード種別: 戦闘(normal / elite / boss) / イベント / 休憩

### 戦闘フロー

- プレイヤーターン開始時: 所持アクションからランダムに `maxActionChoices` 件提示
- 行動は 1ターン最大 `maxActionsPerTurn` 回実行
- クリティカルスロットの行動を選ぶとその行動はクリティカルとして処理
- 味方(Companion) → 敵 の順で自動行動 / その後ステータス継続処理 (Poison 等)

### 報酬システム

- 戦闘勝利後に報酬選択フェーズ (`reward` フェーズ)
- ステータス上昇 / HP回復 / 行動枠増加 / 新アクション など
- 洞察(Insight)で敵全アクション公開済みかつ未習得なら、追加の「洞察報酬」として 1 アクション習得候補が混入

### 洞察 / 行動観測

- 敵が使用した行動は観測履歴に蓄積 (次回以降も保持)
- `Insight` 行動で即座に全行動公開
- 観測/公開状態は LocalStorage に保存され周回継続

### 仲間

- 勝利/ゲームオーバー時のプレイヤービルドをスナップショット保存
- 次回開始時 `companion_select` フェーズで 1 体を仲間に加える(任意)

### 永続データ (LocalStorage)

- 最高到達階層
- 観測済み行動 (キャラID → 行動IDリスト)
- 公開済みキャラ (全行動既知フラグ)
- 保存された仲間スナップショット

### データ / バランス管理

- 定数/CSV: `src/lib/data/consts/`

## 開発

```
pnpm install
pnpm dev
```

## テスト

```
pnpm test
```
